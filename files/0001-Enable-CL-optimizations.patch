From 822d2f89e05bcdae8dd562aa95fe75e0731b33c8 Mon Sep 17 00:00:00 2001
From: Peter O'Connor <sunnyflunk@gmail.com>
Date: Thu, 20 Oct 2016 14:13:30 +1100
Subject: [PATCH] Enable CL optimizations

---
 Makefile.system                         | 6 +++---
 lapack-netlib/INSTALL/make.inc.gfortran | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/Makefile.system b/Makefile.system
index b05177b..3e688d1 100644
--- a/Makefile.system
+++ b/Makefile.system
@@ -230,7 +230,7 @@ MD5SUM = md5 -n
 endif
 
 ifeq ($(OSNAME), Linux)
-EXTRALIB	+= -lm
+EXTRALIB	+= -lm -lgfortran
 NO_EXPRECISION = 1
 endif
 
@@ -990,11 +990,11 @@ FCOMMON_OPT += -g
 endif
 
 ifndef COMMON_OPT
-COMMON_OPT = -O2
+COMMON_OPT = -O3
 endif
 
 ifndef FCOMMON_OPT
-FCOMMON_OPT = -O2 -frecursive
+FCOMMON_OPT = -O3 -frecursive
 endif
 
 
diff --git a/lapack-netlib/INSTALL/make.inc.gfortran b/lapack-netlib/INSTALL/make.inc.gfortran
index 4398643..6116fab 100644
--- a/lapack-netlib/INSTALL/make.inc.gfortran
+++ b/lapack-netlib/INSTALL/make.inc.gfortran
@@ -17,7 +17,7 @@ SHELL = /bin/sh
 #  should not compile LAPACK with flags such as -ffpe-trap=overflow.
 #
 FORTRAN  = gfortran 
-OPTS     = -O2 -frecursive
+OPTS     = -O3 -frecursive
 DRVOPTS  = $(OPTS)
 NOOPT    = -O0 -frecursive
 LOADER   = gfortran
-- 
2.10.1

